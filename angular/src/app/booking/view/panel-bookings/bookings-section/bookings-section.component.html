<div class="panel-section">
        
    <div class="panel-section-header">
        <h2 class="fs3 light">{{header}}</h2>
    </div>

    <div class="booking-itmes-container">

        <div class="item-row booking-item labels">
            <p>Status</p>
            <p>Event date</p>
            <p>Event name</p>
            @if (DESKTOP) {
                <p>Artists</p>
            }
        </div>

        <ng-container *ngIf="_profileUid$ | async as uid">

            <p-accordion class="w-full" expandIcon="pi pi-plus" collapseIcon="pi pi-minus">

                @for (booking of bookings; track booking.formId; let last = $last) {
                    <p-accordionTab>
                        <ng-template pTemplate="header">
                            <div class="item-row booking-item clickable">
                                <p>{{booking.status | status}}</p>
                                <p>{{booking.event.startDate| date : 'dd-MM-yyyy'}}</p>
                                <p>{{booking.event.name}}</p>
    
                                @if (DESKTOP) {
                                    <p>{{booking.artists | names}}</p>
                                }
                            </div>
                        </ng-template>
    
                        <div class="item-row-collapse-content">

                            <div class="item-row-buttons">
                                <app-btn (click)="openBooking.emit(booking)" label="Form data" class="grey"></app-btn>
    
                                @if (['SUBMITTED'].includes(booking.status) && [booking.managerUid].includes(uid)) {
                                    <app-btn (click)="_acceptBooking(booking)" label="Accept" class="green"></app-btn>
                                }
    
                                @if (['SUBMITTED'].includes(booking.status) && [booking.managerUid, booking.promoterUid].includes(uid)) {
                                    <app-btn (click)="_cancelBooking(booking)" label="Cancel"></app-btn>
                                }
                            </div>

                            @if (['DOCUMENTS_REQUESTED'].includes(booking.status)) {
                                <div class="item-row-files margin-top-2">
                                    <app-btn
                                        class="grey" 
                                        icon="description"
                                        label="Contract"
                                        (click)="_getPdf(booking, 'contract')"
                                    ></app-btn>

                                    <app-btn
                                        class="green" 
                                        icon="description"
                                        label="sign contract"
                                        (click)="_signContract(booking)"
                                    ></app-btn>

                                    <app-btn
                                        class="grey" 
                                        icon="description"
                                        label="Tech rider"
                                        (click)="_getPdf(booking, 'tech-rider')"
                                    ></app-btn>
                                </div>
                            }


                        </div>
                    </p-accordionTab>
                }

            </p-accordion>
            

        </ng-container>


    </div>
</div>